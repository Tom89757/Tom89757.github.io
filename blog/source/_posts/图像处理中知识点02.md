---
title: 图像处理中知识点02
date: 2022-09-22 09:14:52
categories:
- 深度学习
tags:
- OpenCV
- python
- 图像处理
---

本文记录一下在进行图片处理过程中的一些知识点和bug：
<!--more-->

1.使用Skimage处理图片时，出现以下报错：
![](https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/20220922091640.png)
其原因在于做图像转换时，如`image=io.imread(path)`，要求3通道的数据，但是读取的图片包含第4个通道alpha通道，粗暴的解决方法为`image = io.imread(path)[:, :, :3]`。
> 参考资料：
> 1. [Skimage rgb2gray giving errors, the input array must have size 3 along](https://stackoverflow.com/questions/70895576/skimage-rgb2gray-giving-errors-the-input-array-must-have-size-3-along)

</br>
2.出现以下报错：

![](https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/20220922092150.png)
其原因在于索引只能是整数，`:`等。
> 参考资料：
> 1. [only integers, slices (`:`), ellipsis (`...`), numpy.newaxis (`None`) and integer or boolean arrays are valid indices](https://stackoverflow.com/questions/34952651/only-integers-slices-ellipsis-numpy-newaxis-none-and-intege)

</br>

3.SuperPixel超像素分割SLIC算法实现

> 参考资料：
> 1. [SuperPixel 超像素分割 SLIC 算法](https://www.zywvvd.com/notes/study/image-processing/super-pixel/super-pixel/#)
> 2. [slic-python-implementation](https://github.com/laixintao/slic-python-implementation)
> 3. # [SLIC算法分割超像素原理及Python实现](https://www.kawabangga.com/posts/1923 "Permalink to SLIC算法分割超像素原理及Python实现")
> 4. [superpixels-SLIC](https://github.com/jayrambhia/superpixels-SLIC)


</br>
4.Moduel 'cv2' has no attribute 'ximgproc'。其原因为安装了多个opencv版本如同时安装了opencv-python和opencv-contrib-python或者只安装了opencv-python。解决方案为卸载已经安装的opencv包，只安装opencv-contrib-python，后者相比opencv-python拥有更完整的功能：
```cmd
pip uninstall opencv-python
pip install opencv-contrib-python
```

> 参考资料：
> 1. [Module 'cv2.cv2' has no attribute 'ximgproc'](https://stackoverflow.com/questions/57427233/module-cv2-cv2-has-no-attribute-ximgproc)

</br>
5.`cv2.grabcut`：该算法为经典传统算法GrabCut的实现，其利用图像中的纹理（颜色）信息和边界（反差）信息，只需要少量的用户交互操作即可得到较好的分割结果。
该函数的完整调用形式为，下面对各参数进行说明：
`cv.grabCut(img, mask, rect, bgdModel, fgdModel, iterCount[, mode]) ->mask, bgdModel, fgdModel`
- `img`：输入的8-bit 3-channel图像
- `mask`：input/output的8-bit单通道mask，当模式设为`GC_INIT_WITH_RECT`时会被函数初始化，其设置有多个选项[GrabCutClasses](https://docs.opencv.org/4.x/d7/d1b/group__imgproc__misc.html#gad43d3e4208d3cf025d8304156b02ba38 "class of the pixel in GrabCut algorithm")
- `rect`：包含分割物体的ROI (Region Of Interest)。ROI之外的像素被标记为显著的背景，只在`mode=GC_INIT_WITH_RECT`时使用。
- `bgdModel`：background model的临时数组，当你处理同一张图片时不要更改它
- `fgdModel`：foreground modele的临时数组，当你处理同一张图片时不要更改它
- `iterCount`：在返回结果之前，算法迭代的次数。注意结果可以通过`mode=GC_INIT_WITH_MASK`或者`mode=GC_EVAL` refine。
- `mode`：选项[GrabCutClasses](https://docs.opencv.org/4.x/d7/d1b/group__imgproc__misc.html#gad43d3e4208d3cf025d8304156b02ba38 "class of the pixel in GrabCut algorithm")。
> 参考资料：
> 1. [OpenCV——Grabcut算法_DDsoup的博客-CSDN博客_grabcut算法](https://blog.csdn.net/m0_61897853/article/details/123458465)
> 2. [GrabCut - Wikipedia](https://en.wikipedia.org/wiki/GrabCut)
> 3. [OpenCV: Image Segmentation](https://docs.opencv.org/4.x/d3/d47/group__imgproc__segmentation.html#ga909c1dda50efcbeaa3ce126be862b37f)
> 4. [Opencv 使用Rect选取与设置窗口ROI_yhl_leo的博客-CSDN博客](https://blog.csdn.net/yhl_leo/article/details/50593825)
> 5. [opencv-rectangle矩形 - 天子骄龙 - 博客园](https://www.cnblogs.com/liming19680104/p/15523295.html)
> 6. [Site Unreachable](https://blog.csdn.net/zouxy09/article/details/8534954)
> 7. [图像分割之（四）OpenCV的GrabCut函数使用和源码解读_无敌三角猫的博客-CSDN博客_grabcut函数](https://blog.csdn.net/fightingforcv/article/details/78400982)