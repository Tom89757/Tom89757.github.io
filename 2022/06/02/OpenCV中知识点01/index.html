<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="google-site-verification" content="x5ktgciuUZaSdL_MVZTZbxB3KlpKTLWWRI5NuYoIlXo">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"tom89757.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":false,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="本文记录一下在实现 DDRQM 过程中的一些 OpenCV 框架和 python 相关知识点。">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenCV中知识点01">
<meta property="og:url" content="https://tom89757.github.io/2022/06/02/OpenCV%E4%B8%AD%E7%9F%A5%E8%AF%86%E7%82%B901/index.html">
<meta property="og:site_name" content="世界在我面前展开">
<meta property="og:description" content="本文记录一下在实现 DDRQM 过程中的一些 OpenCV 框架和 python 相关知识点。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220626163339376.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220629171740572.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220629172819981.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220630103210112.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220630103342159.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220630103853172.png">
<meta property="og:image" content="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220630104939506.png">
<meta property="article:published_time" content="2022-06-02T09:09:03.000Z">
<meta property="article:modified_time" content="2022-07-29T12:16:37.951Z">
<meta property="article:author" content="幻光">
<meta property="article:tag" content="python">
<meta property="article:tag" content="OpenCV">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220626163339376.png">


<link rel="canonical" href="https://tom89757.github.io/2022/06/02/OpenCV%E4%B8%AD%E7%9F%A5%E8%AF%86%E7%82%B901/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://tom89757.github.io/2022/06/02/OpenCV%E4%B8%AD%E7%9F%A5%E8%AF%86%E7%82%B901/","path":"2022/06/02/OpenCV中知识点01/","title":"OpenCV中知识点01"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>OpenCV中知识点01 | 世界在我面前展开</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?a5a702eb0224989403c29d3c91b068f0"></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
<link rel="alternate" href="/atom.xml" title="世界在我面前展开" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">世界在我面前展开</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">死亡扑面而来 腐朽接踵而至</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">幻光</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">44</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">31</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/Tom89757" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Tom89757" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="rss fa-fw"></i>RSS</a>
      </span>
  </div>
  <div class="cc-license site-overview-item animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://tom89757.github.io/2022/06/02/OpenCV%E4%B8%AD%E7%9F%A5%E8%AF%86%E7%82%B901/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="幻光">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="世界在我面前展开">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="OpenCV中知识点01 | 世界在我面前展开">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          OpenCV中知识点01
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2022-06-02 17:09:03" itemprop="dateCreated datePublished" datetime="2022-06-02T17:09:03+08:00">2022-06-02</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2022-07-29 20:16:37" itemprop="dateModified" datetime="2022-07-29T20:16:37+08:00">2022-07-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index"><span itemprop="name">深度学习</span></a>
        </span>
    </span>

  
    <span class="post-meta-break"></span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>12k</span>
    </span>
    <span class="post-meta-item" title="阅读时长">
      <span class="post-meta-item-icon">
        <i class="far fa-clock"></i>
      </span>
      <span class="post-meta-item-text">阅读时长 &asymp;</span>
      <span>11 分钟</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>本文记录一下在实现 <a target="_blank" rel="noopener" href="https://link.springer.com/article/10.1007/s11042-016-3392-4">DDRQM</a> 过程中的一些 OpenCV 框架和 python 相关知识点。</p>
<span id="more"></span>
<p>1.<code>cv2.filter2D()</code>：该函数表示在一张图像上应用相应的卷积核，完整的函数调用形式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.filter2D(src, ddepth, kernel[, dst[, anchor[, delta[, borderType]]]]) -&gt; dst</span><br></pre></td></tr></table></figure>
<p>该函数将任意的 linear filter 应用到一张图像上。当 filter 的部分孔径落在图像之外时，函数会根据 border 类型进行插值。该函数实际上计算的是相关（correlation），而不是卷积（convolution）。</p>
<p>例如，下面代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">retval = cv2.getGaborKernel(ksize=(<span class="number">111</span>,<span class="number">111</span>), sigma=<span class="number">10</span>, theta=<span class="number">60</span>, lambd=<span class="number">10</span>, gamma=<span class="number">1.2</span>)</span><br><span class="line">image1 = cv2.imread(<span class="string">&#x27;src.jpg&#x27;</span>)</span><br><span class="line">result = cv2.filter2D(image1,-<span class="number">1</span>,retval)</span><br></pre></td></tr></table></figure>
<p>表示将对应的 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mi>a</mi><mi>b</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">Gabor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span> 滤波器应用在图像<code>src.jpg</code>上。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a=cv2.getGaborKernel((40,40), 1.69, 0, 3, 0.5)</span><br><span class="line">b=Gabor_filter((40,40), 1.69, 0, 3, 0.5)</span><br></pre></td></tr></table></figure>
</br>
<p>2.<code>cv2.getGaborKernel()</code>：该函数为 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mi>a</mi><mi>b</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">Gabor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span> 滤波器函数，其返回值为一个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>G</mi><mi>a</mi><mi>b</mi><mi>o</mi><mi>r</mi><mi>f</mi><mi>i</mi><mi>l</mi><mi>t</mi><mi>e</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">Gabor filter</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">G</span><span class="mord mathdefault">a</span><span class="mord mathdefault">b</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">t</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>，具体形式为一个二维数组，完整的函数调用形式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.getGaborKernel(ksize, sigma, theta, lambd, gamma[, psi[, ktype]]) -&gt; retval</span><br></pre></td></tr></table></figure>
</br>
<p>3.代码为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result[x][y] = <span class="built_in">abs</span>(depth_img[x][y] - <span class="number">0.5</span>*(depth_img[x1][y1]+depth_img[x2][y2]))</span><br></pre></td></tr></table></figure>
<p>报错信息：<code>RuntimeWarning: overflow encountered in ubyte_scalars</code>。</p>
<p>分析：可能是将两个<code>unit8</code>类型的值相加并将其存入一个<code>unit8</code>，导致数值溢出</p>
<p>解决方案：将<code>unit8</code>类型数值转换为<code>int</code>类型。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">result[x][y] = <span class="built_in">abs</span>(<span class="built_in">int</span>(depth_img[x][y]) - <span class="number">0.5</span>*(<span class="built_in">int</span>(depth_img[x1][y1])+<span class="built_in">int</span>(depth_img[x2][y2])))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/9384435/runtimewarning-overflow-encountered-in-ubyte-scalars">RuntimeWarning: overflow encountered in ubyte_scalars</a></p>
</li>
<li>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/59531334/why-i-am-getting-runtimewarning-overflow-encountered-in-ubyte-scalars-error-i">Why I am getting “RuntimeWarning: overflow encountered in ubyte_scalars error” in python?</a></p>
</li>
</ol>
</blockquote>
</br>
<p>4.以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(path)</span><br><span class="line">height, width, channels = img.shape</span><br></pre></td></tr></table></figure>
<p>表示从路径<code>path</code>中读取图像文件并存入<code>img</code>对象中，通过<code>type(img)</code>可知该对象类型为<code>&lt;class 'numpy.ndarray'&gt;</code>。<code>img.shape</code>返回的是一个三元元组，其值分别对应图像的<code>height</code>、<code>width</code>和<code>channels</code>，即图像形状并不是我们熟悉的<code>width * height * channels</code>的形式</p>
<p>可以通过以下代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.transpose(img)</span><br></pre></td></tr></table></figure>
<p>将<code>img</code>转置为<code>width * height * channels</code>形状，通过我们熟悉的方式访问。</p>
<p>PS：<code>img</code>中<code>channels</code>顺序为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi><mi>G</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">B G R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>。</p>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/55636318/opencv-showing-wrong-width-and-height-of-image">Opencv showing wrong width and height of image</a></li>
<li><a target="_blank" rel="noopener" href="http://www.juzicode.com/opencv-python-resize-transpose-flip/">OpenCV-Python教程：几何空间变换~缩放、转置、翻转(resize,transpose,flip)</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56">Image file reading and writing</a></li>
</ol>
</blockquote>
</br>
<p>5.<code>PILLOW</code> vs <code>OpenCV</code>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读取和加载图片</span></span><br><span class="line"><span class="comment"># PILLOW</span></span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line">img = Image.<span class="built_in">open</span>(<span class="string">&#x27;NLPR1.jpg&#x27;</span>) <span class="comment"># 打开图片</span></span><br><span class="line">img.size <span class="comment"># 获取图片尺寸 width * height</span></span><br><span class="line">img_rgb = img.load() <span class="comment"># 分配内存，并将图像像素值添加到img_rgb对象</span></span><br><span class="line">img_rgb[width, height] <span class="comment"># 通过width/height访问像素值，返回值为RGB模式</span></span><br><span class="line"><span class="comment"># OpenCV</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">img = cv2.imread(<span class="string">&#x27;NLPR1.jpg&#x27;</span>) <span class="comment"># 打开并将图像像素值添加到img对象</span></span><br><span class="line">img.shape <span class="comment"># 获取图片尺寸 height * width * channels</span></span><br><span class="line">img[height][width] <span class="comment">#通过height/width访问像素值，返回值为BGR模式</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取和转换为灰度图</span></span><br><span class="line"><span class="comment"># PILLOW</span></span><br><span class="line">img = Image.<span class="built_in">open</span>(<span class="string">&#x27;NLPR1.jpg&#x27;</span>) <span class="comment"># 打开图片</span></span><br><span class="line">img_gray = img.convert(<span class="string">&#x27;L&#x27;</span>) <span class="comment"># 转换为灰度图</span></span><br><span class="line">pixels_gray = img_gray.load() <span class="comment"># 分配内存，并将图像灰度值添加到img_gray对象</span></span><br><span class="line"><span class="comment"># OpenCV</span></span><br><span class="line"><span class="comment"># 直接读取灰度图</span></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;NLPR1.jpg&#x27;</span>, <span class="number">0</span>) <span class="comment"># 将图像转换为灰度图后读取</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;NLPR1.jpg&#x27;</span>, cv2.IMREAD_GRAYSCALE)</span><br><span class="line"><span class="comment"># 先读取彩色图，再转化为灰度图</span></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;NLPR.jpg&#x27;</span>)</span><br><span class="line">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) <span class="comment"># 将BGR模式的彩色图像转换为灰度图</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://pillow.readthedocs.io/en/stable/reference/Image.html?highlight=load#PIL.Image.Image.load">Image.load()</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/sinat_29957455/article/details/84845016">python opencv将图片转为灰度图</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56">imread()</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d8/d6a/group__imgcodecs__flags.html#ga61d9b0126a3e57d9277ac48327799c80">ImreadModes</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d8/d01/group__imgproc__color__conversions.html#ga397ae87e1288a81d2363b61574eb8cab">cvtColor</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d8/d01/group__imgproc__color__conversions.html#ga4e0972be5de079fed4e3a10e24ef5ef0">ColorConversionCodes</a></li>
</ol>
</blockquote>
</br>
<p>6.<code>cv2.imread()</code>详解：用于读取图像</p>
<p>该函数的完整调用形式为：<code>cv.imread(filename[, flags]) -&gt;retval</code>，<code>retval</code>为返回值。下面对各个参数做具体说明（说明针对C++函数版本）：</p>
<ul>
<li>
<p><code>filename</code>：要读取的图像路径，可以为绝对路径或相对路径</p>
</li>
<li>
<p><code>flags</code>：可以对图像采取的<code>ImreadModes</code>，常见的有<code>cv2.IMREAD_GRAYSCALE</code>、<code>cv.IMREAD_COLOR</code>。</p>
</li>
</ul>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">&#x27;NLPR1.jpg&#x27;</span>) <span class="comment"># 打开并将图像像素值添加到img对象</span></span><br></pre></td></tr></table></figure>
<p>PS：该函数对RGB图的默认读取顺序为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi><mi>G</mi><mi>R</mi></mrow><annotation encoding="application/x-tex">BGR</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mord mathdefault">G</span><span class="mord mathdefault" style="margin-right:0.00773em;">R</span></span></span></span>。</p>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html#ga288b8b3da0892bd651fce07b3bbd3a56">imread()</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d8/d6a/group__imgcodecs__flags.html#ga61d9b0126a3e57d9277ac48327799c80">ImreadModes</a></li>
</ol>
</blockquote>
</br>
<p>7.<code>cv2.cvtColor</code>详解：用于转换图像</p>
<p>该函数的完整调用形式为：<code>cv.cvtColor(src, code[, dst[, dstCn]]) -&gt;dst</code>，<code>dst</code>为返回值。下面对各个参数做具体说明（说明针对C++函数版本）：</p>
<ul>
<li>
<p><code>src</code>：输入图像</p>
</li>
<li>
<p><code>dst</code>：输出图像，和<code>src</code>有相同的<code>size</code>和<code>depth</code>，即相同的<code>height</code>、<code>width</code>和<code>channles</code></p>
</li>
<li>
<p><code>code</code>：颜色空间转换模式<code>ColorConversionCodes</code>，常见的有<code>cv2.BGR2GRAY</code>、<code>cv2.BGR2RGB</code>。</p>
</li>
<li>
<p><code>dstCn</code>：输出图像的<code>channels</code>数，该参数为0时，根据<code>src</code>和<code>dst</code>自动生成</p>
</li>
</ul>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img_gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY) <span class="comment"># 将BGR模式的彩色图像转换为灰度图</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d8/d01/group__imgproc__color__conversions.html#ga397ae87e1288a81d2363b61574eb8cab">cvtColor</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d8/d01/group__imgproc__color__conversions.html#ga4e0972be5de079fed4e3a10e24ef5ef0">ColorConversionCodes</a></li>
</ol>
</blockquote>
</br>
<p>8.<code>cv2.resize()</code>详解：用于放缩图像</p>
<p>该函数的完整调用形式为：<code>cv.resize(src, dsize[, dst[, fx[, fy[, interpolation]]]]) -&gt;dst</code>，<code>dst</code>为返回值。下面对各个参数做具体说明（说明针对C++函数版本）：</p>
<ul>
<li>
<p><code>src</code>：输入图像</p>
</li>
<li>
<p><code>dst</code>：输出图像，当<code>dsize</code>不为0（Python中为<code>None</code>）时，其size与<code>dsize</code>相同；<code>dsize</code>为零时，则与<code>src.size()</code>即<code>fx</code>和<code>fy</code>相同。其类型与<code>src</code>相同。</p>
</li>
<li>
<p><code>dsize</code>：输出图像尺寸，当<code>dsize</code>为0或<code>None</code>时，计算方式为：</p>
<p><code>dsize = Size(round(fx*sr.cols), round(fy*src.rows))</code></p>
<p>要么<code>dsize</code>非零，要么<code>fx</code>和<code>fy</code>非零</p>
</li>
<li>
<p><code>fx</code>：沿着水平轴的放缩因子，当为0时，可以通过<code>(double)dsize.width/src.cols</code>计算</p>
</li>
<li>
<p><code>fy</code>：沿着垂直轴的放缩因子，当为0时，可以通过<code>(double)dsize.height/src.rows</code>计算</p>
</li>
<li>
<p><code>interpolation</code>：插值方法，常见的插值方法有<code>cv2.INTER_NEAREST</code>、<code>cv2.INTER_LINEAR</code>，默认为<code>cv2.INTER_LINEAR</code>。</p>
</li>
</ul>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">&#x27;NLPR1.jpg&#x27;</span>)</span><br><span class="line">img_resize = cv2.resize(img, (<span class="number">100</span>, <span class="number">100</span>)) <span class="comment"># 通过dsize 放缩</span></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">img_resize = cv2.resize(img, <span class="literal">None</span>, fx=<span class="number">0.5</span>, fy=<span class="number">0.3</span>) <span class="comment"># 通过 fx, fy 放缩</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize()</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/da/d54/group__imgproc__transform.html#ga5bb5a1fea74ea38e1a5445ca803ff121">InterpolationFlags</a></li>
</ol>
</blockquote>
</br>
<p>9.<code>cv2.transpose()</code>详解：用于转置矩阵（数组）</p>
<p>该函数的完整调用形式为：<code>cv.transpose(src[, dst]) -&gt;dst</code>。下面对各个参数做具体说明（说明针对C++函数版本）：</p>
<ul>
<li><code>src</code>：输入数组</li>
<li><code>dst</code>：和<code>src</code>相同类型的输出数组</li>
</ul>
<p>其效果为：<code>dst(i, j) = src(j, i)</code>。调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.transpose(img)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d2/de8/group__core__array.html#ga46630ed6c0ea6254a35f447289bd7404">transpose()</a></li>
</ol>
</blockquote>
</br>
<p>10.<code>cv2.flip()</code>详解：用于翻转图像（数组）</p>
<p>该函数的完整调用形式为：<code>cv.flip(src, flipCode[, dst]) -&gt;dst</code>。下面对各个参数做具体说明（说明针对C++函数版本）：</p>
<ul>
<li><code>src</code>：输入数组</li>
<li><code>dst</code>：输出数组，和<code>src</code>具有相同类型和尺寸</li>
<li><code>flitCode</code>：用来指定怎样翻转数组，0表示沿x轴翻转，正值如1表示沿y轴翻转，-1表示同时沿x轴和y轴翻转，即绕(0,0)翻转</li>
</ul>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.flip(img, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d2/de8/group__core__array.html#gaca7be533e3dac7feb70fc60635adf441">flip()</a></li>
</ol>
</blockquote>
</br>
<p>11.<code>cv2.imshow()</code>详解：用于显示图像</p>
<p>该函数的完整调用形式为：<code>cv.imshow(winname, mat) -&gt;None</code>。下面对各个参数做具体说明（说明针对C++函数版本）：</p>
<ul>
<li><code>winname</code>：窗口名，显示在窗口顶栏</li>
<li><code>mat</code>：要显示的矩阵</li>
</ul>
<p>调用示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">img = cv2.imread(<span class="string">&#x27;NLPR.jpg&#x27;</span>)</span><br><span class="line">cv2.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">imshow()</a></li>
</ol>
</blockquote>
</br>
<p>12.<code>cv2.waitKey()</code>详解：用于指定窗口打开时间</p>
<p>该函数的完整调用形式为：<code>cv.waitKey([, delay]) -&gt;retval</code>。下面对各个参数做具体说明（说明针对C++函数版本）：</p>
<ul>
<li><code>delay</code>：表示窗口的持续时间，为0时表示保持窗口打开，为其他正值时表示窗口持续的毫秒数</li>
</ul>
<p>调用示例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv2.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">waitKey()</a></li>
</ol>
</blockquote>
</br>
<p>13.<code>cv2.destroyAllWindows()</code>详解：用于关闭所有 HightGUI 窗口</p>
<p>该函数的完整调用形式为：<code>cv.destroyAllWindows() -&gt;None</code>。</p>
<p>调用实例：似乎不会关闭窗口</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cv2.imshow(<span class="string">&#x27;img&#x27;</span>, img)</span><br><span class="line">cv2.waitKey(<span class="number">1000</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure>
<p>PS：<code>cv2.destroyWindows(winname)</code>用于关闭指定窗口</p>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d7/dfc/group__highgui.html#ga6b7fc1c1a8960438156912027b38f481">destroyWindow()</a></li>
</ol>
</blockquote>
</br>
<p>14.python中获取当前目录路径和上级路径：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;***获取当前目录***&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(os.getcwd())</span><br><span class="line"><span class="built_in">print</span>(os.path.abspath(os.path.dirname(__file__))) <span class="comment"># __file__表示文件名</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;***获取上级目录***&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(os.path.abspath(os.path.dirname(os.path.dirname(__file__))))</span><br><span class="line"><span class="built_in">print</span>(os.path.abspath(os.path.dirname(os.getcwd())))</span><br><span class="line"><span class="built_in">print</span>(os.path.abspath(os.path.join(os.getcwd(), <span class="string">&quot;..&quot;</span>)))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;***获取上上级目录***&#x27;</span></span><br><span class="line"><span class="built_in">print</span>(os.path.abspath(os.path.join(os.getcwd(), <span class="string">&quot;../..&quot;</span>)))</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/leorx01/article/details/71141643">python获取当前目录路径和上级路径</a></li>
<li><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/bfa29141437e">Python获取当前文件路径</a></li>
</ol>
</blockquote>
</br>
<p>15.<code>cv2.GaussianBlur()</code>详解：用于给图片添加高斯模糊</p>
<p>该函数的完整调用形式为：</p>
<p><code>cv.GaussianBlur(src, ksize, sigmaX[, dst[, sigmaY[, borderType]]]) -&gt;dst</code></p>
<p>下面对各个参数做具体说明（说明针对C++函数版本）：</p>
<ul>
<li><code>src</code>：输入图像，图像有不同的通道，会被分别处理</li>
<li><code>dst</code>：输出图像，类型和尺寸与<code>src</code>相同</li>
<li><code>ksize</code>：高斯核尺寸。<code>ksize.width</code>和<code>ksize.height</code>必须为正奇数；否则<code>ksize</code>为0，此时其值通过<code>sigmaX</code>和<code>sigmaY</code>计算</li>
<li><code>sigmaX</code>：在X方向上的 Gaussian kernel standard deviation</li>
<li><code>sigmaY</code>：在Y方向上的 Gaussian kernel standard deviation。为0时设为与<code>sigmaX</code>相等。</li>
<li><code>borderType</code>：像素外插值方法，常见的有<code>cv.BORDER_CONSTANT</code>、<code>cv.BORDER_REPLICATE</code>，不支持<code>cv.BORDER_WRAP</code>。</li>
</ul>
<p>为了完全控制对图片的操作而不需要管OpenCV后续对语义的修改，建议对<code>ksize</code>/<code>sigmaX</code>/<code>sigmaY</code>都进行指定。</p>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">depth_img = cv2.imread(<span class="string">&#x27;NLPR2_depth.png&#x27;</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment"># 给深度图添加高斯模糊</span></span><br><span class="line">depth_img = cv2.GaussianBlur(depth_img, (<span class="number">31</span>, <span class="number">31</span>), sigmaX=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d4/d86/group__imgproc__filter.html#gaabe8c836e97159a9193fb0b11ac52cf1">GaussianBlur()</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d2/de8/group__core__array.html#ga209f2f4869e304c82d07739337eae7c5">BorderTypes</a></li>
<li><a target="_blank" rel="noopener" href="https://zh.m.wikipedia.org/zh/%E9%AB%98%E6%96%AF%E6%A8%A1%E7%B3%8A">高斯模糊</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/54918332">高斯模糊的原理是什么，怎样在界面中实现</a></li>
</ol>
</blockquote>
</br>
<p>16.<code>cv2.threshold()</code>：用于对每个数组元素应用固定水平的阈值。该函数通常用于从一个灰度图中得到二值图像或者去除噪音（即过滤掉太小或太大的值）。该函数支持几种阈值，通过类型参数来设置。</p>
<p>与此同时，<code>THRESH_OTSU</code>和<code>THRESH_TRIANGLE</code>可以联合上述的值来使用。这种情况下，函数通过 Otsu 或者 Triangle 算法来计算最优的阈值。</p>
<p>PS：目前，Otsu 算法和 Triangle 算法只在 8-bit 的单通道图像上实现</p>
<p>该函数的完整调用形式为：</p>
<p><code>cv.threshold(src, thresh, maxval, type[, dst]) -&gt;retval, dst</code></p>
<ul>
<li><code>src</code>：输入数组（多通道，8-bit 或者 32-bit 浮点数）</li>
<li><code>dst</code>：和<code>src</code>同尺寸、类型和通道的输出数组</li>
<li><code>thresh</code>：阈值</li>
<li><code>maxval</code>：在使用<code>THRESH_BINARY</code>和<code>THRESH_BINARY_INV</code>参数时的最大值</li>
<li><code>type</code>：阈值类型，常见的有<code>THRESH_BINARY</code>和<code>THRESH_BINARY_INV</code>。</li>
</ul>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d7/d1b/group__imgproc__misc.html#gae8a4a146d1ca78c626a53577199e9c57">threshold()</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d7/d1b/group__imgproc__misc.html#gaa9e58d2860d4afa658ef70a9b1115576">ThresholdTypes</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/gezhuangzhuang/p/10295181.html">OpenCV-Python入门教程6-Otsu阈值法</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/395708037">OTSU算法（大津法）原理解析</a></li>
</ol>
</blockquote>
</br>
<p>17.<code>cv2.imwrite()</code>：用于存储图片到指定文件，图片类型取决于文件后缀名。其完整声明形式如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv.imwrite(filename, img[, params]) -&gt; retval</span><br></pre></td></tr></table></figure>
<ul>
<li><code>filename</code>：存储文件名</li>
<li><code>img</code>：图片数据对应的矩阵</li>
<li><code>params</code>：成对的指定存储格式的参数。</li>
</ul>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/4.x/d4/da8/group__imgcodecs.html#gabbc7ef1aa2edfaa87772f1202d67e0ce">imwrite()</a></li>
</ol>
</blockquote>
</br>
<p>18.<code>cv2.Canny()</code>：用于通过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>a</mi><mi>n</mi><mi>n</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Canny</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>算法查找图像边缘。其完整声明形式如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">cv::Canny</span>	<span class="params">(InputArray image,</span></span></span><br><span class="line"><span class="params"><span class="function">	OutputArray edges,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">double</span> threshold1,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">double</span> threshold2,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">int</span> apertureSize = <span class="number">3</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">bool</span> L2gradient = <span class="literal">false</span> </span></span></span><br><span class="line"><span class="params"><span class="function">	)</span></span></span><br></pre></td></tr></table></figure>
<p>该函数在输入的图像中查找边缘并通过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi><mi>a</mi><mi>n</mi><mi>n</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">Canny</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>算法在输出中标记出它们。在threshold1和threshold2中最小的值将用于edge linking，最大值将用于查找初始的更为强烈/显著的边缘。具体见 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Canny_edge_detector">Canny edge detector</a></p>
<ul>
<li><code>image</code>：8-bit的输入图片</li>
<li><code>edges</code>：输出的 edge map，8-bit单通道，和<code>image</code>尺寸相同</li>
<li><code>threshold1</code>：滞后过程（hysteresis procedure）的第一个阈值</li>
<li><code>threshold2</code>：滞后过程的第二个阈值</li>
<li><code>apertureSize</code>：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>o</mi><mi>b</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">Sobel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">o</span><span class="mord mathdefault">b</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span></span></span></span>操作子的孔径尺寸</li>
<li><code>L2gradient</code>：a flag。表明是否使用更准确的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">L2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span><span class="mord">2</span></span></span></span>范数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mrow><mo stretchy="false">(</mo><mi>d</mi><mi>I</mi><mi mathvariant="normal">/</mi><mi>d</mi><mi>x</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>+</mo><mo stretchy="false">(</mo><mi>d</mi><mi>I</mi><mi mathvariant="normal">/</mi><mi>d</mi><mi>y</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{(dI/dx)^2+(dI/dy)^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.30499999999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.935em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord">/</span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mopen">(</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord">/</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.740108em;"><span style="top:-2.9890000000000003em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.8950000000000005em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,
158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067
c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,
175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71
c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,
-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26
s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30499999999999994em;"><span></span></span></span></span></span></span></span></span>计算图像梯度大小（<code>L2gradient=true</code>），还是使用默认的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>L</mi><mn>1</mn></mrow><annotation encoding="application/x-tex">L1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">L</span><span class="mord">1</span></span></span></span>范数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mrow><mi mathvariant="normal">∣</mi><mi>d</mi><mi>I</mi><mi mathvariant="normal">/</mi><mi>d</mi><mi>x</mi><mi mathvariant="normal">∣</mi><mo>+</mo><mi mathvariant="normal">∣</mi><mi>d</mi><mi>I</mi><mi mathvariant="normal">/</mi><mi>d</mi><mi>y</mi><mi mathvariant="normal">∣</mi></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{|dI/dx|+|dI/dy|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.30499999999999994em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.935em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">∣</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord">/</span><span class="mord mathdefault">d</span><span class="mord mathdefault">x</span><span class="mord">∣</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">∣</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.07847em;">I</span><span class="mord">/</span><span class="mord mathdefault">d</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mord">∣</span></span></span><span style="top:-2.8950000000000005em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,
158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067
c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,
175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71
c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,
-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26
s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30499999999999994em;"><span></span></span></span></span></span></span></span></span>（<code>L2gradient=false</code>）。</li>
</ul>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">&#x27;messi5.jpg&#x27;</span>,<span class="number">0</span>)</span><br><span class="line">edges = cv2.Canny(img,<span class="number">100</span>,<span class="number">200</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">121</span>),plt.imshow(img,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Original Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line">plt.subplot(<span class="number">122</span>),plt.imshow(edges,cmap = <span class="string">&#x27;gray&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;Edge Image&#x27;</span>), plt.xticks([]), plt.yticks([])</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/3.1.0/dd/d1a/group__imgproc__feature.html#ga04723e007ed888ddf11d9ba04e2232de">Canny()</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/3.1.0/da/d22/tutorial_py_canny.html">Canny Edge Detection in OpenCV</a></li>
<li><a target="_blank" rel="noopener" href="https://zh.m.wikipedia.org/zh-hans/Canny%E7%AE%97%E5%AD%90">Canny算子</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Canny_edge_detector">Canny edge detector</a></li>
<li><a target="_blank" rel="noopener" href="https://zj-image-processing.readthedocs.io/zh_CN/latest/opencv/code/%5BCanny%5D%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/">Canny边缘检测</a></li>
<li><a target="_blank" rel="noopener" href="https://yueyue200830.github.io/2020/04/04/Python%E5%AE%9E%E7%8E%B0Canny%E7%AE%97%E5%AD%90%E8%BE%B9%E7%BC%98%E6%A3%80%E6%B5%8B/">Python实现Canny算子边缘检测</a></li>
</ol>
</br>
<p>19.<code>cv2.Sobel()</code>：使用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>o</mi><mi>b</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">Sobel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">o</span><span class="mord mathdefault">b</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span></span></span></span>算子计算图像导数。其完整声明形式如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">cv::Sobel</span><span class="params">(InputArray src,</span></span></span><br><span class="line"><span class="params"><span class="function">	OutputArray dst,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">int</span> ddepth,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">int</span> dx,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">int</span> dy,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">int</span> ksize = <span class="number">3</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">double</span> scale = <span class="number">1</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">double</span> delta = <span class="number">0</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">	<span class="type">int</span> borderType = BORDER_DEFAULT </span></span></span><br><span class="line"><span class="params"><span class="function">	)</span>	</span></span><br></pre></td></tr></table></figure>
<p>该函数通过用合适的核与函数做卷积来计算图像导数。通常，该函数通过<code>xorder=1, yorder=0, ksize=3</code>和<code>xorder=0, yorder=1, ksize=3</code>来计算图像的一阶<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>导数，分别对应：</p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mi mathvariant="normal">和</mi><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>1</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mo>−</mo><mn>2</mn></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>0</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow></mrow><annotation encoding="application/x-tex">\begin{bmatrix}
-1 &amp; 0 &amp; 1 \\
-2 &amp; 0 &amp; 2 \\
-1 &amp; 0 &amp; 1
\end{bmatrix} 和
\begin{bmatrix}
-1 &amp; -2 &amp; 1 \\
0 &amp; 0 &amp; 0 \\
1 &amp; 2 &amp; 1
\end{bmatrix}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord cjk_fallback">和</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">−</span><span class="mord">2</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">0</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span></span></span></span></span></p>
<p>这两个核。</p>
<ul>
<li><code>src</code>：输入图片</li>
<li><code>dst</code>：相同尺寸和通道数的输出图片</li>
<li><code>ddepth</code>：输出图片depth，见 <a target="_blank" rel="noopener" href="https://docs.opencv.org/3.1.0/d4/d86/group__imgproc__filter.html#filter_depths">combinations</a>。（depth指图片的数据类型，例如对应图像梯度你想要16bit而不是8bit。当输入图片为8-bit类型时，将导致梯度裁剪（精度不够）</li>
<li><code>dx</code>：梯度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>的order</li>
<li><code>dy</code>：梯度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>的order</li>
<li><code>ksize</code>：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>o</mi><mi>b</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">Sobel</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">o</span><span class="mord mathdefault">b</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span></span></span></span>核尺寸，必须是1/3/5/7。</li>
<li><code>scale</code>：计算梯度值时的可选因子，默认不提供</li>
<li><code>delta</code>：在<code>dst</code>中存储结果之前默认加到结果上的可选delta值。</li>
<li><code>borderType</code>：像素插值类型。</li>
</ul>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.opencv.org/3.1.0/d4/d86/group__imgproc__filter.html#gacea54f142e81b6758cb6f375ce782c8d">Soble()</a></li>
<li><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E7%B4%A2%E8%B2%9D%E7%88%BE%E7%AE%97%E5%AD%90">Sobel算子</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhuifeng-mayi/p/9563947.html">边缘检测</a></li>
</ol>
</br>
<p>20.<code>numpy.ndarray.flatten()</code>：返回一个坍缩成一维的数组的副本。</p>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.array([[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>,<span class="number">4</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten()</span><br><span class="line">array([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.flatten(<span class="string">&#x27;F&#x27;</span>)</span><br><span class="line">array([<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">4</span>])</span><br></pre></td></tr></table></figure>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.ndarray.flatten.html">numpy.ndarray.flatten</a></li>
</ol>
</br>
<p>21.<code>math.atan(x)</code>vs<code>math.atan2(y, x)</code>：</p>
<p><code>atan</code>返回<code>x</code>对应的arc tangent，其结果所属区间为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mo>−</mo><mi>π</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo separator="true">,</mo><mi>π</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(-\pi/2, \pi/2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord">/</span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">)</span></span></span></span>；</p>
<p><code>atan2(y, x)</code>则返回<code>atan(y/x)</code>，其结果所属区间为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">(</mo><mo>−</mo><mi>π</mi><mo separator="true">,</mo><mi>π</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(-\pi, \pi)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">−</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mclose">)</span></span></span></span>。</p>
<p>举例来说，<code>atan(1)=atan2(1,1)</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo><mi>π</mi><mi mathvariant="normal">/</mi><mn>4</mn></mrow><annotation encoding="application/x-tex">=\pi/4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord">/</span><span class="mord">4</span></span></span></span>；<code>atan2(-1,-1)</code><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>=</mo><mo>−</mo><mn>3</mn><mi>π</mi><mi mathvariant="normal">/</mi><mn>4</mn></mrow><annotation encoding="application/x-tex">=-3\pi/4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord">3</span><span class="mord mathdefault" style="margin-right:0.03588em;">π</span><span class="mord">/</span><span class="mord">4</span></span></span></span>。</p>
<blockquote>
<p>参考文献：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://docs.python.org/3.8/library/math.html?highlight=atan#math.atan">math.atan(x)</a></li>
</ol>
</blockquote>
</br>
<p>22.<code>numpy.zeros</code>：用于返回给定<code>shape</code>和<code>type</code>的用零填充的新的数组。其完整调用形式为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.zeros(shape, dtype=<span class="built_in">float</span>, order=<span class="string">&#x27;C&#x27;</span>, *, like=<span class="literal">None</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><code>shape</code>：指定数组形状，如<code>(2, )</code>或<code>(2,3)</code>。</li>
<li><code>dtype</code>：指定填充的数据类型，如<code>dtype=int</code>，默认为<code>numpy.float64</code>。</li>
<li><code>order</code>：指定行优先还是列优先，默认为<code>order='C'</code>，行优先，<code>order='F'</code>表示列优先。</li>
<li><code>like</code>：引用对象，用于创建非Numpy arrays类型的数组，可以兼容其他类型的数组。</li>
</ul>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.zeros(<span class="number">5</span>)</span><br><span class="line">array([ <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>,  <span class="number">0.</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>np.zeros((<span class="number">5</span>,), dtype=<span class="built_in">int</span>)</span><br><span class="line">array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>])</span><br></pre></td></tr></table></figure>
<p>PS：<code>numpy.ones</code>与之类似</p>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.zeros.html">numpy.zeros</a></li>
<li><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.ones.html#numpy.ones">numpy.ones</a></li>
</ol>
</blockquote>
</br>
<p>23.在进行灰度图转为BGR图<code>img = cv2.cvtColor(gray, cv2.COLOR_GRAY2BGR)</code>之前，需要确保灰度图<code>gray</code>中数值的类型满足转换要求，否则会出现如下错误：</p>
<p><img src="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220626163339376.png" alt="image-20220626163339376" /></p>
<p>可以通过<code>gray = np.uint8(gray)</code>将灰度图转换为满足条件的格式：</p>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/55179724/opencv-error-unsupported-depth-of-input-image">Opencv error -Unsupported depth of input image:</a></li>
</ol>
</blockquote>
</br>
<p>24.<code>numpy.sum</code>：计算给定<code>axis</code>上数组的元素之和。其完整调用形式为：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">numpy.<span class="built_in">sum</span>(a, axis=<span class="literal">None</span>, dtype=<span class="literal">None</span>, out=<span class="literal">None</span>, keepdims=&lt;no value&gt;, initial=&lt;no value&gt;, where=&lt;no value&gt;)[source]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>a</code>：数组类型的对象</li>
<li><code>axis</code>：None、整数或整数类型的元组，可选。默认为None，将对所有元素求和。</li>
<li><code>dtype</code>：数据类型，可选。</li>
<li><code>out</code>：用于存放求和结果的输出数组，可选。</li>
<li>略</li>
</ul>
<p>调用实例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = np.ones((<span class="number">10</span>,<span class="number">2</span>), dtype=<span class="built_in">int</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">sum</span>()</span><br><span class="line"><span class="number">20</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">sum</span>(axis=<span class="number">0</span>)</span><br><span class="line">array([<span class="number">10</span>, <span class="number">10</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>a.<span class="built_in">sum</span>(axis=<span class="number">0</span>)/<span class="number">6</span></span><br><span class="line">array([<span class="number">1.66666667</span>, <span class="number">1.66666667</span>])</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/generated/numpy.sum.html">numpy.sum</a></li>
</ol>
</blockquote>
</br>
<p>25.在算法实现中使用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>D</mi><mi>F</mi><mi>S</mi></mrow><annotation encoding="application/x-tex">DFS</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">D</span><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span></span></span></span>时出现以下报错：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RecursionError: maximum recursion depth exceeded <span class="keyword">in</span> comparison</span><br></pre></td></tr></table></figure>
<p>其出现原因为递归序列太长超过了系统设置，可以通过以下方式查看系统设置的最大递归深度：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span>(sys.getrecursionlimit())</span><br><span class="line"><span class="number">1000</span></span><br></pre></td></tr></table></figure>
<p>此时可以通过两种方式解决该问题：</p>
<ul>
<li>设置更大的系统递归深度：<code>sys.setrecursionlimit(1000*1000+10)</code></li>
<li>优化算法，采用更高效的方式实现。（推荐）</li>
</ul>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/pltrdy/rouge/issues/19">Maximum recursion depth exceeded in comparison</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/46659192/python-infinite-recursion-with-formula">Python infinite recursion with formula</a></li>
</ol>
</blockquote>
</br>
<p>26.当判断python字典中是否存在某个key时，<code>has_key()</code>方法在python中无法使用：</p>
<p><img src="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220629171740572.png" alt="image-20220629171740572" /></p>
<p>其原因在于<code>has_key()</code>方法在Python3中被去除。</p>
<p>通过<code>for i, j in img_depth_pair.keys:</code>遍历字典键时，会出现如下报错：</p>
<p><img src="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220629172819981.png" alt="image-20220629172819981" /></p>
<p>其原因在于<code>dict.keys</code>为不可迭代对象，此时应该通过以下方式遍历key和value：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> img_depth_pair:</span><br><span class="line">	<span class="built_in">print</span>(key)</span><br><span class="line">    <span class="built_in">print</span>(img_depth_pair[key])</span><br></pre></td></tr></table></figure>
<p>此外，值得补充的是，列表不能作为python字典的键，而元组可以，这一特性源自python语言的设计。</p>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://cloud.tencent.com/developer/article/1893987">使用 for 循环遍历 Python 字典的 3 种方法 !</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/33727149/dict-object-has-no-attribute-has-key">‘dict’ object has no attribute ‘has_key’</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/7257588/why-cant-i-use-a-list-as-a-dict-key-in-python">Why can’t I use a list as a dict key in python?</a></li>
<li><a target="_blank" rel="noopener" href="https://wiki.python.org/moin/DictionaryKeys">Why Lists Can’t Be Dictionary Keys</a></li>
</ol>
</blockquote>
</br>
<p>27.在OpenCV中进行图像处理时，经常会出现类似于下列的数据类型的问题：</p>
<p><img src="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220630103210112.png" alt="image-20220630103210112" /></p>
<p>下面是OpenCV中各种数据类型的参考列表：</p>
<p><img src="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220630103342159.png" alt="image-20220630103342159" /></p>
<p>其中C1/C2/C3/C4表示通道数。0~30表示编号。</p>
<p>下面是一个更为详细的列表：</p>
<p><img src="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220630103853172.png" alt="image-20220630103853172" /></p>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="http://ninghang.blogspot.com/2012/11/list-of-mat-type-in-opencv.html">LIST OF MAT TYPE IN OPENCV</a></li>
<li><a target="_blank" rel="noopener" href="https://udayawijenayake.com/2021/06/07/opencv-data-types/">OpenCV “cv::Mat” Data Types</a></li>
</ol>
</blockquote>
</br>
<p>28.在使用numpy中的<code>dtype</code>（data type）参数时，常疑惑于参数类型的选择，此处对常用的<code>dtype</code>类型做一个梳理：</p>
<p><img src="https://raw.githubusercontent.com/Tom89757/ImageHost/main/hexo/image-20220630104939506.png" alt="image-20220630104939506" /></p>
<p>PS：上述列表并未展示所有的<code>dtype</code>类型，详见参考资料：</p>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/user/basics.types.html">Array types and conversions between types</a></li>
<li><a target="_blank" rel="noopener" href="https://numpy.org/doc/stable/reference/arrays.dtypes.html">Data type objects <code>dtype</code></a></li>
</ol>
</blockquote>
</br>
<p>28.在使用<code>cv2.imshow('img', img)</code>时，传入的<code>img</code>的<code>dtype</code>需要为<code>np.uint8</code>类型，否则展示的图片会出现奇怪的扭曲 (distortion)：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line">[...]</span><br><span class="line">info = np.iinfo(data.dtype) <span class="comment"># Get the information of the incoming image type</span></span><br><span class="line">data = data.astype(np.float64) / info.<span class="built_in">max</span> <span class="comment"># normalize the data to 0 - 1</span></span><br><span class="line">data = <span class="number">255</span> * data <span class="comment"># Now scale by 255</span></span><br><span class="line">img = data.astype(dtype=np.uint8)</span><br><span class="line">cv2.imshow(<span class="string">&quot;Window&quot;</span>, img)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考资料：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/46689428/convert-np-array-of-type-float64-to-type-uint8-scaling-values">Convert np.array of type float64 to type uint8 scaling values</a></li>
</ol>
</blockquote>
</br>

    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>幻光
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="https://tom89757.github.io/2022/06/02/OpenCV%E4%B8%AD%E7%9F%A5%E8%AF%86%E7%82%B901/" title="OpenCV中知识点01">https://tom89757.github.io/2022/06/02/OpenCV中知识点01/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/python/" rel="tag"># python</a>
              <a href="/tags/OpenCV/" rel="tag"># OpenCV</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2022/05/22/Windows10%E5%B8%B8%E8%A7%81%E6%93%8D%E4%BD%9C/" rel="prev" title="Windows10常见操作">
                  <i class="fa fa-chevron-left"></i> Windows10常见操作
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2022/06/03/matplotlib%E4%B8%AD%E7%9F%A5%E8%AF%86%E7%82%B901/" rel="next" title="matplotlib中知识点01">
                  matplotlib中知识点01 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">幻光</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
    <span title="站点总字数">186k</span>
  </span>
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:49</span>
  </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha256-TThEtR+XalhWKkfF383YLOrI50NGNeIqrzS+q08afrY=" crossorigin="anonymous">



</body>
</html>
